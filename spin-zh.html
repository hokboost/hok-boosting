<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>幸运转盘</title>
  <style>
    #wheel {
      width: 300px;
      height: 300px;
      border-radius: 50%;
      border: 8px solid #333;
      position: relative;
      margin: 50px auto;
      background: conic-gradient(
        #ccc 0deg 60deg,
        #f99 60deg 120deg,
        #9f9 120deg 180deg,
        #ff9 180deg 240deg,
        #99f 240deg 300deg,
        #f66 300deg 360deg
      );
      transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    }

    #pointer {
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 30px solid black;
      position: absolute;
      top: -30px;
      left: calc(50% - 15px);
      z-index: 10;
    }

    #spin-btn {
      display: block;
      margin: 20px auto;
    }

    #result {
      text-align: center;
      font-size: 1.5em;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div style="position: relative; width: 300px; margin: auto;">
    <div id="pointer"></div>
    <div id="wheel"></div>
  </div>
  <input id="password" placeholder="输入密码" style="display:block; margin:10px auto;">
  <button id="spin-btn">点击抽奖</button>
  <div id="result"></div>

  <script>
    const wheel = document.getElementById("wheel");
    const resultEl = document.getElementById("result");

    document.getElementById("spin-btn").addEventListener("click", () => {
      const password = document.getElementById("password").value;
      fetch("https://hokboost.ngrok.io/spin", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ key: password })
      })
      .then(res => res.json())
      .then(data => {
        if (!data.success) {
          resultEl.textContent = "❌ " + data.message;
          return;
        }

        const base = 360 * 5;
        const targetRotation = base + (360 - data.angle);
        wheel.style.transition = 'none';
        wheel.style.transform = `rotate(0deg)`;

        setTimeout(() => {
          wheel.style.transition = 'transform 4s cubic-bezier(0.33, 1, 0.68, 1)';
          wheel.style.transform = `rotate(${targetRotation}deg)`;
        }, 50);

        setTimeout(() => {
          resultEl.textContent = `🎉 恭喜获得：${data.prize}`;
        }, 4200);
      });
    });
  </script>
</body>
</html>

